transitions:
  - id: create_form
    from: start
    to: waiting_for_response
    call:
      - id: form
        tool: CreateDocument
        args:
          document: MeetingNotesDocument
          update:
            content:
              text: |
                meeting 1.1.2025
                budget: need 2 cut costs sarah said
                hire new person?? --> marketing
                vendor pricing - follow up needed by anna
                mike's project delayed again. deadline moved - when??? next month maybe
                client wants faster delivery but budget tight. can we do it?

  - id: user_response
    from: waiting_for_response
    to: response_received
    when: manual
    call:
      - id: create_response
        tool: CreateDocument
        args:
          document: MeetingNotesDocument
          update:
            content: ${ ctx.payload.transition.payload }
        assign:
          meetingNotes: ${ result.data.content }

  - id: optimize_notes
    from: response_received
    to: notes_optimized
    call:
      - id: prompt
        tool: AiGenerateDocument
        args:
          llm:
            provider: openai
            model: gpt-4o
          responseDocument: OptimizedNotesDocument
          prompt: |
            Extract all information from the provided meeting notes into the structured document.

            <Meeting Notes>
            {{ meetingNotes.text }}
            </Meeting Notes>
        assign:
          optimizedNotes: ${ result.data.content }

  - id: confirm
    from: notes_optimized
    to: end
    when: manual
    call:
      - id: create_response
        tool: CreateDocument
        args:
          document: OptimizedNotesDocument
          update:
            content: ${ ctx.payload.transition.payload }
        assign:
          optimizedNotes: ${ result.data.content }